(this["webpackJsonpand-challenge-five"]=this["webpackJsonpand-challenge-five"]||[]).push([[0],{50:function(e,t,n){e.exports=n(64)},64:function(e,t,n){"use strict";n.r(t);var a=n(16),r=(n(51),n(69)),i=n(20),c=["KeyA","KeyD","KeyS","KeyW"];Object(a.registerComponent)("camera-controls",{schema:{enabled:{default:!0},minX:{default:Number.NEGATIVE_INFINITY},maxX:{default:Number.POSITIVE_INFINITY},minZ:{default:Number.NEGATIVE_INFINITY},maxZ:{default:Number.POSITIVE_INFINITY},acceleration:{default:100},easing:{default:1.1}},init:function(){this.pressedKeys={},this.velocity=new i.c(0,0,0),this.directionVector=new i.c(0,0,0),this.rotationEuler=new i.a(0,0,0,"YXZ"),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},remove:function(){window.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("keydown",this.onKeyDown)},onKeyDown:function(e){c.includes(e.code)&&(this.pressedKeys[e.code]=!0)},onKeyUp:function(e){c.includes(e.code)&&delete this.pressedKeys[e.code]},tick:function(e,t){if(this.data.enabled&&(this.velocity.x||this.velocity.z||!Object(r.a)(this.pressedKeys))&&(t/=1e3,this.updateVelocity(t),this.velocity.x||this.velocity.z)){this.directionVector.copy(this.velocity),this.directionVector.multiplyScalar(t);var n=this.el.getAttribute("rotation");this.rotationEuler.set(0,i.b.degToRad(n.y),0),this.directionVector.applyEuler(this.rotationEuler),this.el.object3D.position.add(this.directionVector),this.el.object3D.position.x>this.data.maxX?this.el.object3D.position.setX(this.data.maxX):this.el.object3D.position.x<this.data.minX&&this.el.object3D.position.setX(this.data.minX),this.el.object3D.position.z>this.data.maxZ?this.el.object3D.position.setZ(this.data.maxZ):this.el.object3D.position.z<this.data.minZ&&this.el.object3D.position.setZ(this.data.minZ)}},updateVelocity:function(e){if(e>.2)return this.velocity.x=0,void(this.velocity.z=0);var t=Math.pow(1/this.data.easing,30*e);0!==this.velocity.x&&(this.velocity.x-=this.velocity.x*t),0!==this.velocity.z&&(this.velocity.z-=this.velocity.z*t),Math.abs(this.velocity.x)<1e-5&&(this.velocity.x=0),Math.abs(this.velocity.z)<1e-5&&(this.velocity.z=0);var n=this.data.acceleration*e;this.pressedKeys.KeyA&&(this.velocity.x-=n),this.pressedKeys.KeyD&&(this.velocity.x+=n),this.pressedKeys.KeyW&&(this.velocity.z-=n),this.pressedKeys.KeyS&&(this.velocity.z+=n)}});var o={MINE:"^",WALL:"+",ROBOT:"R",EXIT:"E",EMPTY:"#"},s=null,l="M",u="?",b=n(72),f=n(14),m=Object(f.a)((function(e){return e.robot}),b.a),p=Object(f.a)((function(e){return e.state}),b.a),d=Object(f.a)((function(e){return e.cells}),b.a),y=Object(f.a)((function(e){return e.cells}),(function(e){return e.reduce((function(e,t){return t.flag===l?e+1:e}),0)})),h=Object(f.a)((function(e){return e.cells}),(function(e){return e.reduce((function(e,t){return t.type===o.MINE?e+1:e}),0)})),O=Object(f.a)((function(e){return e.floorOffset}),b.a),j=Object(f.a)((function(e){return e.height}),b.a),x=Object(f.a)((function(e){return e.width}),b.a),E=Object(f.a)(x,(function(e){return(e-1)/2})),v=Object(f.a)(j,(function(e){return(e-1)/2})),g=Object(f.a)(d,(function(e){return e.every((function(e){switch(e.type){case o.MINE:return e.flag===l;case o.EMPTY:case o.ROBOT:return e.isActivated;case o.WALL:case o.EXIT:default:return!0}}))})),w=Object(f.a)(d,(function(e){return e.find((function(e){return e.type===o.EXIT})).position})),k=n(12),A=Object(k.createAction)("End Game",(function(e){return{success:e}})),T=Object(k.createAction)("Generate Map From String",(function(e){return{map:e}})),I=Object(k.createAction)("Initialise Map",(function(e){return{cells:e.cells,width:e.width,height:e.height}})),M=Object(k.createAction)("Trigger Robot Tile"),L=Object(k.createAction)("Trigger Tile",(function(e){return{x:e.x,y:e.y}})),R=Object(k.createAction)("Activate Tile",(function(e){return{position:{x:e.x,y:e.y}}})),D=Object(k.createAction)("Move Robot Relative",(function(e){return{delta:{x:e.x,y:e.y}}})),K=Object(k.createAction)("Move Robot",(function(e){return{x:e.x,y:e.y,rotation:e.rotation}})),N=Object(k.createAction)("Set Flag",(function(e){return{position:{x:e.x,y:e.y},flag:e.flag}})),C=Object(k.createAction)("Cycle Flag",(function(e){return{position:{x:e.x,y:e.y}}})),F=Object(k.createAction)("Set Floor Offset",(function(e){return{offset:e}})),_=n(17),P="init",X="running",z="won",S="lost",V=n(70),W=n(71),Y=Object(k.createReducer)({cells:[],width:0,height:0,robot:{x:0,y:0,rotation:0},state:P,flags:[],floorOffset:6}).handleAction(I,(function(e,t){var n=t.payload.cells.find((function(e){return e.type===o.ROBOT}));return Object(_.a)({},e,{state:X,cells:t.payload.cells,width:t.payload.width,height:t.payload.height,robot:n?Object(_.a)({},n.position,{rotation:Math.PI/2}):e.robot})})).handleAction(A,(function(e,t){return Object(_.a)({},e,{state:t.payload.success?z:S})})).handleAction(K,(function(e,t){return Object(_.a)({},e,{robot:t.payload})})).handleAction(R,(function(e,t){var n=Object(V.a)((function(e){return e.position.x===t.payload.position.x&&e.position.y===t.payload.position.y}),e.cells);return n<0||e.cells[n].isActivated?e:Object(_.a)({},e,{cells:Object(W.a)(n,(function(e){return Object(_.a)({},e,{isActivated:!0,flag:null})}),e.cells)})})).handleAction(N,(function(e,t){var n=Object(V.a)((function(e){return e.position.x===t.payload.position.x&&e.position.y===t.payload.position.y}),e.cells);return n<0?e:Object(_.a)({},e,{cells:Object(W.a)(n,(function(e){return Object(_.a)({},e,{flag:t.payload.flag})}),e.cells)})})).handleAction(F,(function(e,t){return Object(_.a)({},e,{floorOffset:t.payload.offset})})),Z=n(15),B=n.n(Z),G=n(7),U=B.a.mark(te),J=B.a.mark(ne),H=B.a.mark(ae),Q=B.a.mark(re),q=B.a.mark(ie),$=B.a.mark(ce),ee=[s,l,u];function te(e){var t,n,a,r,i,c,s,l,u;return B.a.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.payload,n=t.x,a=t.y,b.next=3,Object(G.c)(d);case 3:if(r=b.sent,(i=r.find((function(e){return e.position.x===n&&e.position.y===a})))&&!i.isActivated&&i.type!==o.WALL){b.next=7;break}return b.abrupt("return");case 7:return b.next=9,Object(G.b)(R({x:n,y:a}));case 9:if(i.type!==o.MINE){b.next=13;break}return b.next=12,Object(G.b)(A(!1));case 12:return b.abrupt("return");case 13:if(0===i.adjacent){b.next=15;break}return b.abrupt("return");case 15:return b.next=17,Object(G.c)(x);case 17:return c=b.sent,b.next=20,Object(G.c)(j);case 20:s=b.sent,l=n-1;case 22:if(!(l<=n+1)){b.next=37;break}u=a-1;case 24:if(!(u<=a+1)){b.next=34;break}if(!(l<0||l>c-1||u<0||u>s-1)){b.next=27;break}return b.abrupt("continue",31);case 27:if(l!==n||u!==a){b.next=29;break}return b.abrupt("continue",31);case 29:return b.next=31,Object(G.a)(te,{payload:{x:l,y:u}});case 31:u++,b.next=24;break;case 34:l++,b.next=22;break;case 37:case"end":return b.stop()}}),U)}function ne(e){var t,n,a,r,i,c,s,l,u,b,f,p,y;return B.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload.delta,n=t.x,a=t.y,h.next=3,Object(G.c)(d);case 3:return r=h.sent,h.next=6,Object(G.c)(m);case 6:if(i=h.sent,r.length){h.next=9;break}return h.abrupt("return");case 9:if(c=n+i.x,s=a+i.y,l=r.find((function(e){return e.position.x===c&&e.position.y===s}))){h.next=14;break}return h.abrupt("return");case 14:return u=Math.atan2(a,n)+Math.PI/2,h.next=17,Object(G.c)(g);case 17:return b=h.sent,(l.type===o.WALL||l.type===o.EXIT&&!b)&&(c=i.x,s=i.y),h.next=21,Object(G.b)(K({x:c,y:s,rotation:u}));case 21:if(l.type!==o.MINE){h.next=25;break}return h.next=24,Object(G.b)(L({x:c,y:s}));case 24:return h.abrupt("return");case 25:return h.next=27,Object(G.c)(w);case 27:if(f=h.sent,p=f.x,y=f.y,!b||p!==c||y!==s){h.next=33;break}return h.next=33,Object(G.b)(A(!0));case 33:case"end":return h.stop()}}),J)}function ae(e){var t,n,a,r,i,c,o,s;return B.a.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.payload.position,n=t.x,a=t.y,b.next=3,Object(G.c)(d);case 3:if(r=b.sent,i=r.find((function(e){return e.position.x===n&&e.position.y===a}))){b.next=7;break}return b.abrupt("return");case 7:if((c=ee[(ee.indexOf(i.flag)+1)%ee.length])!==l){b.next=16;break}return b.next=11,Object(G.c)(y);case 11:return o=b.sent,b.next=14,Object(G.c)(h);case 14:s=b.sent,o>=s&&(c=u);case 16:return b.next=18,Object(G.b)(N({x:n,y:a,flag:c}));case 18:case"end":return b.stop()}}),H)}function re(){var e,t,n;return B.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(G.c)(m);case 2:return e=a.sent,t=e.x,n=e.y,a.next=7,Object(G.b)(L({x:t,y:n}));case 7:case"end":return a.stop()}}),Q)}function ie(e){var t,n,a;return B.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.map,n=t.split("\n").reverse(),a=n.map((function(e,t){return e.split("").map((function(a,r){for(var i={type:a,adjacent:0,flag:s,position:{x:r,y:t},isActivated:!1},c=r-1;c<=r+1;c++)for(var l=t-1;l<=t+1;l++)c<0||l<0||c>e.length-1||l>n.length-1||n[l][c]===o.MINE&&i.adjacent++;return i}))})).flat(),r.next=5,Object(G.b)(I({cells:a,height:n.length,width:n[0].length}));case 5:case"end":return r.stop()}}),q)}function ce(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.d)(T,ie);case 2:return e.next=4,Object(G.d)(M,re);case 4:return e.next=6,Object(G.d)(C,ae);case 6:return e.next=8,Object(G.d)(L,te);case 8:return e.next=10,Object(G.d)(D,ne);case 10:case"end":return e.stop()}}),$)}var oe=n(21),se=n(43),le=n(46),ue=Object(le.a)(),be=Object(oe.createStore)(Y,Object(se.composeWithDevTools)({actionCreators:{ACTIVATE_TILE:function(e,t){return R({x:e,y:t})},TRIGGER_TILE:function(e,t){return L({x:e,y:t})},CYCLE_FLAG:function(e,t){return C({x:e,y:t})},MOVE_ROBOT:function(e,t){return K({x:e,y:t})},SET_FLOOR_OFFSET:function(e){return F(e)}}})(Object(oe.applyMiddleware)(ue)));ue.run(ce);var fe=n(0),me=n.n(fe),pe=n(4),de=n(66),ye=n(67),he=n(68),Oe=n(45),je=n(73),xe=me.a.memo((function(){var e=Object(fe.useRef)(),t=Object(pe.b)();return Object(fe.useEffect)((function(){var n=Object(de.a)(e.current,"axismove").pipe(Object(ye.a)((function(e){var t=e.detail,n=t.changed,a=t.axis;return(n[2]||n[3])&&(Math.abs(a[2])>.15||Math.abs(a[3])>.15)})),Object(he.a)(200),Object(Oe.a)((function(e){return Math.abs(e.detail.axis[2])>Math.abs(e.detail.axis[3])?{x:e.detail.axis[2]>0?1:-1,y:0}:{x:0,y:e.detail.axis[3]>0?1:-1}})),Object(je.a)((function(e){0}))).subscribe((function(e){t(D(e))})),a=Object(de.a)(e.current,"buttondown").pipe(Object(ye.a)((function(e){return 4===e.detail.id}))).subscribe((function(){t(M())})),r=Object(de.a)(document,"keydown").pipe(Object(Oe.a)((function(e){return e.code}))),i=r.pipe(Object(ye.a)((function(e){return"ArrowRight"===e})),Object(he.a)(200)).subscribe((function(){return be.dispatch(D({x:1,y:0}))})),c=r.pipe(Object(ye.a)((function(e){return"ArrowLeft"===e})),Object(he.a)(200)).subscribe((function(){return be.dispatch(D({x:-1,y:0}))})),o=r.pipe(Object(ye.a)((function(e){return"ArrowUp"===e})),Object(he.a)(200)).subscribe((function(){return be.dispatch(D({x:0,y:1}))})),s=r.pipe(Object(ye.a)((function(e){return"ArrowDown"===e})),Object(he.a)(200)).subscribe((function(){return be.dispatch(D({x:0,y:-1}))}));return r.pipe(Object(ye.a)((function(e){return"Space"===e}))).subscribe((function(){be.dispatch(M())})),function(){n.unsubscribe(),a.unsubscribe(),c.unsubscribe(),i.unsubscribe(),o.unsubscribe(),s.unsubscribe()}}),[t]),me.a.createElement("a-entity",null,me.a.createElement("a-entity",{ref:e,"laser-controls":"hand: right; model: false",line:"color: red; opacity: 0.75",raycaster:"objects: .clickable; far: 30","tracked-controls":"idPrefix: OpenVR; controller: 0;"}))})),Ee=me.a.memo((function(){var e=Object(fe.useRef)(),t=Object(pe.c)(O),n=Object(pe.c)(v);return Object(fe.useEffect)((function(){e.current.object3D.position.set(0,t+n,0)}),[t,n]),me.a.createElement("a-entity",{class:"rig",ref:e},me.a.createElement(xe,null),me.a.createElement("a-camera",{cursor:"rayOrigin: mouse",raycaster:"objects: .clickable; far: 30",id:"camera",fov:"75","camera-controls":"enabled: true; minX: -1.4; maxX: 1.4; minZ: -1.4; maxZ: 1.4; acceleration: 30; easing: 300","wasd-controls":"enabled: false"}))})),ve=me.a.memo((function(){return me.a.createElement("a-entity",{class:"wall",mixin:"wall-box"})})),ge=me.a.memo((function(){return Object(pe.c)(g)?me.a.createElement("a-entity",null):me.a.createElement(ve,null)})),we=["","#3E007A","#FF0072","#680097","#F100C3","#21004F","green","orange","red"],ke=me.a.memo((function(e){var t=e.cell,n=t.flag,r=t.position,i=r.x,c=r.y,o=t.adjacent,s=t.isActivated,l=Object(fe.useRef)(),u=Object(pe.b)(),b=Object(fe.useCallback)((function(){u(C({x:i,y:c}))}),[u,i,c]),f=Object(fe.useMemo)((function(){return s?.2:n?.4:0}),[s,n]);return Object(fe.useEffect)((function(){a.utils.entity.setComponentProperty(l.current,"material.opacity",f);var e=Object(de.a)(l.current,"mouseenter").subscribe((function(){a.utils.entity.setComponentProperty(l.current,"material.opacity",.6)})),t=Object(de.a)(l.current,"mouseleave").subscribe((function(){a.utils.entity.setComponentProperty(l.current,"material.opacity",f)}));return function(){e.unsubscribe(),t.unsubscribe()}}),[f]),me.a.createElement("a-entity",{class:"tile",position:"0 0 -0.45"},n&&me.a.createElement("a-text",{class:"flag",align:"center","wrap-count":"1",width:"0.75",height:"0.75",color:"red",font:"monoid",value:n,position:"0 0 0.04"}),o>0&&s&&me.a.createElement("a-text",{value:o,align:"center","wrap-count":"1",width:"0.75",height:"0.75",color:we[o],font:"monoid",position:"0 0 0.04"}),me.a.createElement("a-plane",{ref:l,class:s?"activated":"clickable",onClick:b,width:"0.95",height:"0.95",material:"color: ".concat(n?"black":"gray"),position:"0 0 0.02"}))})),Ae=me.a.memo((function(e){var t=e.cell;return Object(pe.c)(p)!==X||t.isActivated?me.a.createElement("a-entity",{class:"mine",position:"0 0 -0.25",mixin:"mine-model",animation:"property: position; from: 0 -0.1 0; to: 0 0.1 0; loop: true; dur: 2000; dir: alternate; easing: easeInOutQuad;",animation__rotation:"property: rotation; from: 0 0 0; to: 0 360 0; loop: true; dur: 5000; easing: linear"}):me.a.createElement(ke,{cell:t})})),Te=me.a.memo((function(e){var t,n=e.cell,a=Object(fe.useRef)();return Object(fe.useEffect)((function(){a.current.object3D.position.set(n.position.x,n.position.y,0)}),[n.position.x,n.position.y]),t=n.type===o.WALL?me.a.createElement(ve,null):n.type===o.EXIT?me.a.createElement(ge,null):n.type===o.MINE?me.a.createElement(Ae,{cell:n}):me.a.createElement(ke,{cell:n}),me.a.createElement("a-entity",{class:"cell",ref:a},t)})),Ie=me.a.memo((function(){var e=Object(fe.useRef)(),t=Object(pe.c)(E),n=Object(pe.c)(v),a=Object(pe.c)(x),r=Object(pe.c)(j);return Object(fe.useEffect)((function(){e.current.object3D.position.set(t,n,-.5)}),[t,n]),me.a.createElement("a-entity",{ref:e,class:"maze-background"},me.a.createElement("a-plane",{key:"".concat(a,"x").concat(r),class:"maze-background_grid",width:a,height:r,material:"src: #grid-full; transparent: true; roughness: 0.4; sphericalEnvMap: #sky; alphaTest: 0.05; repeat: ".concat(a," ").concat(r)}),me.a.createElement("a-plane",{class:"maze-background_block",width:a,height:r,material:"color: white; opacity: 0.2; transparent: true;"}))})),Me=me.a.memo((function(){var e=Object(fe.useRef)(),t=Object(fe.useRef)(0),n=Object(pe.c)(m);return Object(fe.useEffect)((function(){e.current.setAttribute("animation__pos","property: position; to: ".concat(n.x," ").concat(n.y," 0; dur: 200;"))}),[n.x,n.y]),Object(fe.useEffect)((function(){var a=t.current,r=i.b.radToDeg(n.rotation);270===a&&0===r?r=360:0===a&&270===r&&(a=360),e.current.setAttribute("animation__rot","property: rotation; from: 90 ".concat(a," 0; to: 90 ").concat(r," 0; dur: 100;")),t.current=r}),[n.rotation]),me.a.createElement("a-gltf-model",{class:"robot",ref:e,src:"#android-gltf",scale:"0.25 0.25 0.25"})})),Le=me.a.memo((function(){var e=Object(fe.useRef)(),t=Object(pe.c)(d),n=Object(pe.c)(E),a=Object(pe.c)(O),r=Object(pe.b)();Object(fe.useEffect)((function(){r(T("+++++++++++++++++++++++++++++++\n+####################^###^####E\n+#####^##########^############+\n+###########################^#+\n+###^^^#############^######^##+\n+##########^##################+\n+#############+++#############+\n+####^########+++#####^####^##+\n+#############+++#############+\n+#############^###############+\n+######^############^##^######+\n+R##^####################^####+\n+++++++++++++++++++++++++++++++"))}),[r]),Object(fe.useEffect)((function(){e.current.object3D.position.set(-n,a,-20)}),[n,a]);var i=t.map((function(e){return me.a.createElement(Te,{cell:e,key:"".concat(e.position.x,",").concat(e.position.y)})}));return me.a.createElement("a-entity",{ref:e,class:"maze"},me.a.createElement(Me,null),i,me.a.createElement(Ie,null))})),Re=n(47),De=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},Ke=function(){var e=De(10,35),t=De(10,35),n=Array(t);n[0]=Array(e).fill(o.WALL),n[n.length-1]=Array(e).fill(o.WALL);for(var a=1;a<t-1;a++)n[a]=[o.WALL].concat(Object(Re.a)(Array(e-2).fill(o.EMPTY)),[o.WALL]);n[1][1]=o.ROBOT,n[De(1,t-2)][e-1]=o.EXIT,function(e){for(var t=e.cells,n=e.width,a=e.height,r=e.amount,i=0,c=0;i<r;){var s=De(1,n-2),l=De(1,a-2);if(t[l][s]===o.EMPTY)t[l][s]=o.MINE,i++;else if(++c>25)return}}({cells:n,width:e,height:t,amount:De(15,40)});var r=n.reverse().map((function(e){return e.join("")})).join("\n");return console.log("new map",r),r},Ne=n(48),Ce=n(49),Fe=new i.c(0,-.015,0),_e=me.a.memo((function(e){var t=e.onPress,n=Object(Ce.a)(e,["onPress"]),r=Object(fe.useRef)();return Object(fe.useEffect)((function(){var e=Object(de.a)(r.current,"mouseenter").subscribe((function(){a.utils.entity.setComponentProperty(r.current,"material.opacity",.6)})),t=Object(de.a)(r.current,"mouseleave").subscribe((function(){a.utils.entity.setComponentProperty(r.current,"material.opacity",1)})),n=Object(de.a)(r.current,"mousedown").subscribe((function(){r.current.object3D.position.add(Fe)})),i=Object(de.a)(r.current,"mouseup").subscribe((function(){r.current.object3D.position.sub(Fe)}));return function(){e.unsubscribe(),t.unsubscribe(),n.unsubscribe(),i.unsubscribe()}}),[]),me.a.createElement("a-entity",n,me.a.createElement("a-entity",{ref:r,class:"clickable",mixin:"button-top",onClick:t}),me.a.createElement("a-entity",{mixin:"button-base"}))})),Pe=me.a.memo((function(){var e=Object(pe.c)(y),t=Object(pe.c)(h);return me.a.createElement("a-entity",null,me.a.createElement("a-text",{id:"mines-remaining",value:"Flagged: ".concat(e," / ").concat(t),font:"aileronsemibold",color:"#680097",width:"3",position:"-1.35 0.2 0"}))})),Xe=me.a.memo((function(){return me.a.createElement("a-entity",null,me.a.createElement("a-text",{value:"Left Click: Cycle flags",font:"aileronsemibold",color:"#680097",width:"2",position:"-1.35 -0.2 0"}),me.a.createElement("a-text",{value:"Space: Activate the tile the robot is on",font:"aileronsemibold",color:"#680097",width:"2",position:"-1.35 -0.3 0"}),me.a.createElement("a-text",{value:"Arrow Keys: Move Robot",font:"aileronsemibold",color:"#680097",width:"2",position:"-1.35 -0.4 0"}))})),ze=me.a.memo((function(){return me.a.createElement("a-entity",null,me.a.createElement("a-text",{value:"Point + Trigger: Cycle flags",font:"aileronsemibold",color:"#680097",width:"2",position:"-1.35 -0.2 0"}),me.a.createElement("a-text",{value:"A: Activate the tile the robot is on",font:"aileronsemibold",color:"#680097",width:"2",position:"-1.35 -0.3 0"}),me.a.createElement("a-text",{value:"Thumbstick: Move Robot",font:"aileronsemibold",color:"#680097",width:"2",position:"-1.35 -0.4 0"}))})),Se=me.a.memo((function(){var e,t=Object(pe.c)(p),n=Object(pe.b)(),a=function(){var e=Object(fe.useState)(!1),t=Object(Ne.a)(e,2),n=t[0],a=t[1],r=Object(fe.useCallback)((function(){return a(!0)}),[a]),i=Object(fe.useCallback)((function(){return a(!1)}),[a]);return Object(fe.useEffect)((function(){return window.addEventListener("enter-vr",r),window.addEventListener("exit-vr",i),function(){window.removeEventListener("enter-vr",r),window.removeEventListener("exit-vr",i)}}),[a,r,i]),n}(),r=Object(fe.useCallback)((function(){var e=Ke();n(T(e))}),[n]);switch(t){case S:e=me.a.createElement("a-text",{value:"You Lost!",font:"aileronsemibold",color:"#680097",width:"4",position:"-1 0 0"});break;case z:e=me.a.createElement("a-text",{value:"You Won!",font:"aileronsemibold",color:"#680097",width:"4",position:"-1 0 0"});break;default:e=me.a.createElement("a-entity",null,me.a.createElement("a-text",{value:"Flag all mines and activate all tiles to unlock exit",font:"aileronsemibold",color:"#680097",width:"3",position:"-1.35 0.4 0"}),me.a.createElement(Pe,null),a?me.a.createElement(ze,null):me.a.createElement(Xe,null))}return me.a.createElement("a-entity",null,e,me.a.createElement("a-text",{value:"RESET >",font:"aileronsemibold",color:"#680097",width:"3",position:"0.7 -0.29 0"}),me.a.createElement(_e,{rotation:"90 0 0",position:"1.3 -0.3 0",onPress:r}),!1,me.a.createElement("a-entity",{geometry:"primitive: plane; height: 1; width: 3",material:"roughness: 0.6; metalness: 0.9; sphericalEnvMap: #sky; color: gray;"}))})),Ve=me.a.memo((function(){var e=Object(fe.useRef)(),t=Object(pe.c)(O),n=Object(pe.c)(v);return Object(fe.useEffect)((function(){e.current.object3D.position.set(0,t+n,0)}),[t,n]),me.a.createElement("a-entity",{class:"platform",ref:e},me.a.createElement("a-entity",{class:"platform_floor",geometry:"primitive: plane; height: 3; width: 3;",material:"depthTest: false; color: gray; opacity: 0.4; alphaTest: 0.05;",rotation:"-90 0 0"}),me.a.createElement("a-entity",{class:"control-panel",position:"0 0.359 -1.849",rotation:"-45 0 0"},me.a.createElement(Se,null)))})),We=me.a.memo((function(){return me.a.createElement("a-scene",{stats:void 0},me.a.createElement("a-assets",null,me.a.createElement("img",{id:"sky",alt:"sky",src:"sky.jpg",crossOrigin:"anonymous"}),me.a.createElement("img",{id:"grid",alt:"grid texture",src:"grid.png",crossOrigin:"anonymous"}),me.a.createElement("img",{id:"grid-full",alt:"grid texture",src:"grid-full.png",crossOrigin:"anonymous"}),me.a.createElement("a-asset-item",{id:"android-gltf",src:"android.gltf"}),me.a.createElement("a-asset-item",{id:"mine-gltf",src:"mine.gltf"}),me.a.createElement("a-asset-item",{id:"numberFont",src:"https://cdn.glitch.com/c719c986-c0c5-48b8-967c-3cd8b8aa17f3%2FdawningOfANewDayRegular.typeface.json?1490305922844"}),me.a.createElement("a-mixin",{id:"wall-box",geometry:"primitive: box; width: 1; height: 1; depth: 1;",material:"roughness: 0.4; metalness: 0.9; sphericalEnvMap: #sky; color: gray;"}),me.a.createElement("a-mixin",{id:"mine-model","gltf-model":"#mine-gltf",scale:"0.01 0.01 0.01"}),me.a.createElement("a-mixin",{id:"button-top",geometry:"primitive: box; width: 0.18; height: 0.025; depth: 0.18;",position:"0 0.02 0",material:"color: red"}),me.a.createElement("a-mixin",{id:"button-base",geometry:"primitive: cone; radiusTop: 0.15; radiusBottom: 0.19; height: 0.02; segmentsRadial: 4; segmentsHeight: 1",material:"color: white",rotation:"0 45 0"})),me.a.createElement(Ee,null),me.a.createElement(Le,null),me.a.createElement(Ve,null),me.a.createElement("a-entity",{geometry:"primitive: plane; width: 10000; height: 10000;",rotation:"-90 0 0",material:"src: #grid; offset: .5 .5; repeat: 10000 10000; transparent: true; shader: standard; roughness: 0.4; sphericalEnvMap: #sky; alphaTest: 0.05"}),me.a.createElement("a-sky",{src:"#sky",rotation:"0 -90 0"}),me.a.createElement("a-entity",{light:"type: directional; color: #EEE; intensity: 0.5",position:"-1 1 0"}),me.a.createElement("a-entity",{light:"color: #ffaaff; intensity: 1.5",position:"5 5 5"}),me.a.createElement("a-entity",{light:"color: white; intensity: 0.5",position:"-5 5 15"}),me.a.createElement("a-entity",{light:"color: white; type: ambient;"}))})),Ye=n(28);n.n(Ye).a.unstable_createRoot(document.getElementById("root")).render(me.a.createElement(pe.a,{store:be},me.a.createElement(We,null)))}},[[50,1,2]]]);
//# sourceMappingURL=main.322c801a.chunk.js.map